<?php
/**
 * SocialEngine
 *
 * @category   Application_Core
 * @package    Core
 * @copyright  Copyright 2006-2010 Weblego Developments
 * @license    http://www.sacialengine.com/license/
 * @version    $Id: index.tpl 9747 2012-07-26 02:08:08Z john $
 * @author     John
 */
?>

<?php if ($this->viewer->getIdentity()) : ?>
    <ul class="pt-info-user">
        <li>
            <a href="javascript:void(0)" class="pt-icon pt-request"><span>6</span></a>
            <div class="pt-toggle-layout pt-toggle-request">
                <div class="pt-icon-arrow"><span></span></div>
                <div class="pt-toggle-layout-content">
                    <div class="pt-request-how">
                        <div class="pt-title"><span>Yêu cầu kết bạn</span></div>
                        <div class="wd-scrollbars-heder">
                            <ul class="pt-request-content">
                                <li>
                                    <a href="#"><span class="pt-avatar"><img src="application/themes/newhospitality/images/thumb/img-01.jpg" alt="Image" /></span></a>
                                    <div class="pt-how-info-request">
                                        <div class="pt-how-info-request-left">
                                            <h3><a href="#"> Ngoc Vinh</a></h3>
                                            <p>1 Bạn chung</p>
                                        </div>
                                        <div class="pt-how-info-request-right">
                                            <a href="#" class="pt-yes">Chấp nhận</a>
                                            <a href="#">Từ chối</a>
                                        </div>
                                    </div>
                                </li>
                                <li>
                                    <a href="#"><span class="pt-avatar"><img src="application/themes/newhospitality/images/thumb/img-02.jpg" alt="Image" /></span></a>
                                    <div class="pt-how-info-request">
                                        <div class="pt-how-info-request-left">
                                            <h3><a href="#"> Ngoc Vinh</a></h3>
                                            <p>1 Bạn chung</p>
                                        </div>
                                        <div class="pt-how-info-request-right">
                                            <a href="#" class="pt-yes">Chấp nhận</a>
                                            <a href="#">Từ chối</a>
                                        </div>
                                    </div>
                                </li>
                                <li>
                                    <a href="#"><span class="pt-avatar"><img src="application/themes/newhospitality/images/thumb/img-03.jpg" alt="Image" /></span></a>
                                    <div class="pt-how-info-request">
                                        <div class="pt-how-info-request-left">
                                            <h3><a href="#"> Ngoc Vinh</a></h3>
                                            <p>1 Bạn chung</p>
                                        </div>
                                        <div class="pt-how-info-request-right">
                                            <a href="#" class="pt-yes">Chấp nhận</a>
                                            <a href="#">Từ chối</a>
                                        </div>
                                    </div>
                                </li>
                                <li>
                                    <a href="#"><span class="pt-avatar"><img src="application/themes/newhospitality/images/thumb/img-04.jpg" alt="Image" /></span></a>
                                    <div class="pt-how-info-request">
                                        <div class="pt-how-info-request-left">
                                            <h3><a href="#"> Ngoc Vinh</a></h3>
                                            <p>1 Bạn chung</p>
                                        </div>
                                        <div class="pt-how-info-request-right">
                                            <a href="#" class="pt-yes">Chấp nhận</a>
                                            <a href="#">Từ chối</a>
                                        </div>
                                    </div>
                                </li>
                                <li>
                                    <a href="#"><span class="pt-avatar"><img src="application/themes/newhospitality/images/thumb/img-05.jpg" alt="Image" /></span></a>
                                    <div class="pt-how-info-request">
                                        <div class="pt-how-info-request-left">
                                            <h3><a href="#"> Ngoc Vinh</a></h3>
                                            <p>1 Bạn chung</p>
                                        </div>
                                        <div class="pt-how-info-request-right">
                                            <a href="#" class="pt-yes">Chấp nhận</a>
                                            <a href="#">Từ chối</a>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                        <div class="pt-more-heder"><a href="#">Xem tất cả</a></div>
                    </div>
                </div>
            </div>
        </li>
        <li>
            <a href="javascript:void(0)" class="pt-icon pt-message"><span>7</span></a>
            <div class="pt-toggle-layout pt-toggle-message">
                <div class="pt-icon-arrow"><span></span></div>
                <div class="pt-toggle-layout-content">
                    <div class="pt-message-how">
                        <div class="pt-title"><span>Tin nhắn</span><a href="#">Gửi tin nhắn</a></div>
                        <div class="wd-scrollbars-heder">
                            <ul class="pt-message-content">
                                <li>
                                    <a href="#">
                                        <span class="pt-avatar"><img src="application/themes/newhospitality/images/thumb/img-05.jpg" alt="Image" /></span>
                                        <div class="pt-how-info-message">
                                            <h3>Ngoc Vinh</h3>
                                            <p>Sed ut perspiciatis unde omnis...</p>
                                            <span>10:54 am</span>
                                        </div>
                                    </a>
                                </li>
                                <li>
                                    <a href="#">
                                        <span class="pt-avatar"><img src="application/themes/newhospitality/images/thumb/img-02.jpg" alt="Image" /></span>
                                        <div class="pt-how-info-message">
                                            <h3>Ngoc Vinh</h3>
                                            <p>Sed ut perspiciatis unde omnis...</p>
                                            <span>10:54 am</span>
                                        </div>
                                    </a>
                                </li>
                                <li>
                                    <a href="#">
                                        <span class="pt-avatar"><img src="application/themes/newhospitality/images/thumb/img-03.jpg" alt="Image" /></span>
                                        <div class="pt-how-info-message">
                                            <h3>Ngoc Vinh</h3>
                                            <p>Sed ut perspiciatis unde omnis...</p>
                                            <span>10:54 am</span>
                                        </div>
                                    </a>
                                </li>
                                <li>
                                    <a href="#">
                                        <span class="pt-avatar"><img src="application/themes/newhospitality/images/thumb/img-04.jpg" alt="Image" /></span>
                                        <div class="pt-how-info-message">
                                            <h3>Ngoc Vinh</h3>
                                            <p>Sed ut perspiciatis unde omnis...</p>
                                            <span>10:54 am</span>
                                        </div>
                                    </a>
                                </li>
                                <li>
                                    <a href="#">
                                        <span class="pt-avatar"><img src="application/themes/newhospitality/images/thumb/img-04.jpg" alt="Image" /></span>
                                        <div class="pt-how-info-message">
                                            <h3>Ngoc Vinh</h3>
                                            <p>Sed ut perspiciatis unde omnis...</p>
                                            <span>10:54 am</span>
                                        </div>
                                    </a>
                                </li>
                            </ul>
                        </div>
                        <div class="pt-more-heder"><a href="#">Xem tất cả</a></div>
                    </div>
                </div>
            </div>
        </li>
        <li>
            <a href="javascript:void(0)" class="pt-icon pt-jewel"><span>9</span></a>
            <div class="pt-toggle-layout pt-toggle-jewel">
                <div class="pt-icon-arrow"><span></span></div>
                <div class="pt-toggle-layout-content">
                    <div class="pt-message-how">
                        <div class="pt-title"><span>Nội dung đang được cập nhật</span></div>
                        <div class="wd-scrollbars-heder">

                        </div>
                        <div class="pt-more-heder"><a href="#">Xem tất cả</a></div>
                    </div>
                </div>
            </div>
        </li>
        <li>
            <a href="javascript:void(0)" class="pt-name">Backstreet Boys<span></span></a>
            <div class="pt-toggle-layout pt-toggle-name">
                <div class="pt-icon-arrow"><span></span></div>
                <div class="pt-toggle-layout-content">
                    <ul class="pt-edit">
                        <li>
                            <a href="#">Thiết lập tài khoản</a>
                        </li>
                        <li>
                            <a href="#">Thiết lập quyền riêng tư</a>
                        </li>
                        <li>
                            <a href="#">Trợ giúp</a>
                        </li>
                        <li>
                            <a href="#">Đăng xuất</a>
                        </li>
                    </ul>
                </div>
            </div>
        </li>
    </ul>
<?php else: ?>
    <div class="pt-login">
        <span>Bạn đã là thành viên ?</span>
        <a href="#pt-fancybox">Đăng nhập</a>
        <div class="pt-none">
            <div id="pt-fancybox" class="login-checkout">
                <form method="post" action="<?php echo $this->baseUrl() ?>/login" class="global_form" id="user_form_login" accept-charset="utf-8">
                    <fieldset>
                        <h3>Đăng nhập</h3>
                        <ul>
                            <li>
                                <label>Email của bạn</label>											
                                <input class="input-text required-entry validate-email" style="width:223px;padding:10px" type="text" tabindex="1" value="E-Mail" id="email" name="email" onfocus="javascript:if (this.value == 'E-Mail')
                                            this.value = ''" onblur="if (this.value == '')
                                                        this.value = 'E-Mail'">
                            </li>
                            <li>
                                <label>Mật khẩu</label>
                                <input class="input-text required-entry validate-email" style="width:223px;padding:10px" type="password" tabindex="2" value="MẬT KHẨU" id="password" name="password" onfocus="javascript:if (this.value == 'MẬT KHẨU')
                                            this.value = ''" onblur="if (this.value == '')
                                                        this.value = 'MẬT KHẨU'">
                            </li>
                            <li class="control">
                                <p>
                                    <input type="checkbox" title="" value="1" id="remember" name="remember" tabindex="4" class="checkbox">
                                    <input type="hidden" value="0" name="remember">                        						
                                    <label for="is_subscribed">ghi nhớ</label>
                                </p>
                                <a href="/user/auth/forgot" class="password">Quên mật khẩu?</a>
                            </li>
                            <li class="last">
                                <button tabindex="5" type="submit" id="submit" name="submit" title="" class="button">Đăng nhập</button>
                                <a href="#" class="facebook">facebook</a>
                            </li>
                            <input type="hidden" id="return_url" value="" name="return_url">
                        </ul>
                    </fieldset>
                </form>
            </div>
        </div>
    </div>
<?php endif; ?>

<?php /*
  <div id='core_menu_mini_menu'>
  <?php
  // Reverse the navigation order (they're floating right)
  $count = count($this->navigation);
  foreach( $this->navigation->getPages() as $item ) $item->setOrder(--$count);
  ?>
  <ul>
  <?php if( $this->viewer->getIdentity()) :?>
  <li id='core_menu_mini_menu_update'>
  <span onclick="toggleUpdatesPulldown(event, this, '4');" style="display: inline-block;" class="updates_pulldown">
  <div class="pulldown_contents_wrapper">
  <div class="pulldown_contents">
  <ul class="notifications_menu" id="notifications_menu">
  <div class="notifications_loading" id="notifications_loading">
  <img src='<?php echo $this->layout()->staticBaseUrl ?>application/modules/Core/externals/images/loading.gif' style='float:left; margin-right: 5px;' />
  <?php echo $this->translate("Loading ...") ?>
  </div>
  </ul>
  </div>
  <div class="pulldown_options">
  <?php echo $this->htmlLink(array('route' => 'default', 'module' => 'activity', 'controller' => 'notifications'),
  $this->translate('View All Updates'),
  array('id' => 'notifications_viewall_link')) ?>
  <?php echo $this->htmlLink('javascript:void(0);', $this->translate('Mark All Read'), array(
  'id' => 'notifications_markread_link',
  )) ?>
  </div>
  </div>
  <a href="javascript:void(0);" id="updates_toggle" <?php if( $this->notificationCount ):?> class="new_updates"<?php endif;?>><?php echo $this->translate(array('%s Update', '%s Updates', $this->notificationCount), $this->locale()->toNumber($this->notificationCount)) ?></a>
  </span>
  </li>
  <?php endif; ?>
  <?php foreach( $this->navigation as $item ): ?>
  <li><?php echo $this->htmlLink($item->getHref(), $this->translate($item->getLabel()), array_filter(array(
  'class' => ( !empty($item->class) ? $item->class : null ),
  'alt' => ( !empty($item->alt) ? $item->alt : null ),
  'target' => ( !empty($item->target) ? $item->target : null ),
  ))) ?></li>
  <?php endforeach; ?>
  <?php if($this->search_check):?>
  <li id="global_search_form_container">
  <form id="global_search_form" action="<?php echo $this->url(array('controller' => 'search'), 'default', true) ?>" method="get">
  <input type='text' class='text suggested' name='query' id='global_search_field' size='20' maxlength='100' alt='<?php echo $this->translate('Search') ?>' />
  </form>
  </li>
  <?php endif;?>
  </ul>
  </div>


  <script type='text/javascript'>
  var notificationUpdater;

  en4.core.runonce.add(function(){
  if($('global_search_field')){
  new OverText($('global_search_field'), {
  poll: true,
  pollInterval: 500,
  positionOptions: {
  position: ( en4.orientation == 'rtl' ? 'upperRight' : 'upperLeft' ),
  edge: ( en4.orientation == 'rtl' ? 'upperRight' : 'upperLeft' ),
  offset: {
  x: ( en4.orientation == 'rtl' ? -4 : 4 ),
  y: 2
  }
  }
  });
  }

  if($('notifications_markread_link')){
  $('notifications_markread_link').addEvent('click', function() {
  //$('notifications_markread').setStyle('display', 'none');
  en4.activity.hideNotifications('<?php echo $this->string()->escapeJavascript($this->translate("0 Updates"));?>');
  });
  }

  <?php if ($this->updateSettings && $this->viewer->getIdentity()): ?>
  notificationUpdater = new NotificationUpdateHandler({
  'delay' : <?php echo $this->updateSettings;?>
  });
  notificationUpdater.start();
  window._notificationUpdater = notificationUpdater;
  <?php endif;?>
  });


  var toggleUpdatesPulldown = function(event, element, user_id) {
  if( element.className=='updates_pulldown' ) {
  element.className= 'updates_pulldown_active';
  showNotifications();
  } else {
  element.className='updates_pulldown';
  }
  }

  var showNotifications = function() {
  en4.activity.updateNotifications();
  new Request.HTML({
  'url' : en4.core.baseUrl + 'activity/notifications/pulldown',
  'data' : {
  'format' : 'html',
  'page' : 1
  },
  'onComplete' : function(responseTree, responseElements, responseHTML, responseJavaScript) {
  if( responseHTML ) {
  // hide loading icon
  if($('notifications_loading')) $('notifications_loading').setStyle('display', 'none');

  $('notifications_menu').innerHTML = responseHTML;
  $('notifications_menu').addEvent('click', function(event){
  event.stop(); //Prevents the browser from following the link.

  var current_link = event.target;
  var notification_li = $(current_link).getParent('li');

  // if this is true, then the user clicked on the li element itself
  if( notification_li.id == 'core_menu_mini_menu_update' ) {
  notification_li = current_link;
  }

  var forward_link;
  if( current_link.get('href') ) {
  forward_link = current_link.get('href');
  } else{
  forward_link = $(current_link).getElements('a:last-child').get('href');
  }

  if( notification_li.get('class') == 'notifications_unread' ){
  notification_li.removeClass('notifications_unread');
  en4.core.request.send(new Request.JSON({
  url : en4.core.baseUrl + 'activity/notifications/markread',
  data : {
  format     : 'json',
  'actionid' : notification_li.get('value')
  },
  onSuccess : function() {
  window.location = forward_link;
  }
  }));
  } else {
  window.location = forward_link;
  }
  });
  } else {
  $('notifications_loading').innerHTML = '<?php echo $this->string()->escapeJavascript($this->translate("You have no new updates."));?>';
  }
  }
  }).send();
  };

  /*
  function focusSearch() {
  if(document.getElementById('global_search_field').value == 'Search') {
  document.getElementById('global_search_field').value = '';
  document.getElementById('global_search_field').className = 'text';
  }
  }
  function blurSearch() {
  if(document.getElementById('global_search_field').value == '') {
  document.getElementById('global_search_field').value = 'Search';
  document.getElementById('global_search_field').className = 'text suggested';
  }
  }

  </script>
 */ ?>